<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>roles</title>

    <!-- BOOTSTRAP STYLES-->
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" />
    <!-- FONTAWESOME STYLES-->
    <link th:href="@{/css/font-awesome.css}" rel="stylesheet" />
    <!--CUSTOM BASIC STYLES-->
    <link th:href="@{/css/basic.css}" rel="stylesheet" />
    <!--CUSTOM MAIN STYLES-->
    <link th:href="@{/css/custom.css}" rel="stylesheet" />
    <!--My Role Table Styles-->
    <link th:href="@{/css/role-table.css}" rel="stylesheet"/>
    <!-- GOOGLE FONTS-->
    <!--
    <link th:href='@{https://fonts.useso.com/css?family=Open+Sans}' rel='stylesheet' type='text/css' />
    -->
</head>
<body>
    <div id="wrapper">
        <div th:replace="~{topbar/topbar::topbar}"></div>
        <!-- /. NAV TOP  -->
        <div th:replace="~{sidebar/side-bar::sidebar}"></div>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
            <div id="page-inner">
                <div class="row">
                    <div class="col-md-12">
                        <h1 class="page-head-line">Data Table</h1>
                        <h1 class="page-subhead-line">This is dummy text , you can replace it with your original text. </h1>

                    </div>
                </div>
                <!-- /. ROW  -->
                <div id="role-cards-root"></div>
                <!--
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Kitchen Sink
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Basic Table
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Striped Rows Table
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Bordered Table
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive table-bordered">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                Hover Rows
                            </div>
                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                            <tr>
                                                <td>4</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-default">

                            <div class="panel-heading">
                                Context Classes
                            </div>

                            <div class="panel-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>First Name</th>
                                                <th>Last Name</th>
                                                <th>Username</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="success">
                                                <td>1</td>
                                                <td>Mark</td>
                                                <td>Otto</td>
                                                <td>@mdo</td>
                                            </tr>
                                            <tr class="info">
                                                <td>2</td>
                                                <td>Jacob</td>
                                                <td>Thornton</td>
                                                <td>@fat</td>
                                            </tr>
                                            <tr class="warning">
                                                <td>3</td>
                                                <td>Larry</td>
                                                <td>the Bird</td>
                                                <td>@twitter</td>
                                            </tr>
                                            <tr class="danger">
                                                <td>4</td>
                                                <td>John</td>
                                                <td>Smith</td>
                                                <td>@jsmith</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                -->
            </div>
            <!-- /. PAGE INNER  -->
        </div>
        <!-- /. PAGE WRAPPER  -->
    </div>
    <!-- /. WRAPPER  -->
    <!-- SCRIPTS -AT THE BOTOM TO REDUCE THE LOAD TIME-->
    <!-- JQUERY SCRIPTS -->
    <script th:src="@{/js/jquery-1.10.2.js}"></script>
    <!-- BOOTSTRAP SCRIPTS -->
    <script th:src="@{/js/bootstrap.js}"></script>
     <!-- METISMENU SCRIPTS -->
    <script th:src="@{/js/jquery.metisMenu.js}"></script>
    <!-- CUSTOM SCRIPTS -->
    <script th:src="@{/js/custom.js}"></script>


</body>
<script type="text/javascript" th:inline="javascript"></script>
<script>

    $(document).ready(function () {
        $("#Data_Tables_a").addClass("active-menu");
        let UserId = [[${UserId}]];
        getRoles(UserId);
        //console.log(UserId);
    })

    function getRoles(id) {
        //let url = "/roles/UserId="+id;
        let url = "/rolesBaseInfo/UserId="+id;
        $.get(url, function (data, status) {
            if(status==="success") {
                //console.log(data);
                //console.log(data.length);
                //console.log(data);
                //$("#role-cards-root").html("<a>"+data+"</a>");
                let html="<div class=\"row\">" +
                    "<div class=\"col-md-6\">";
                for(let i = 0; i < data.length; i++){
                    let gender = "";
                    if(data[i].roleGender===1)
                        gender = "男";
                    else if(data[i].roleGender===0)
                        gender = "女";
                    else
                        gender = "其他";
                    //console.log("data["+i+"]="+data[i].roleCardId);
                    html+="<div class=\"panel panel-default\">"
                    +"<div class=\"panel-heading\">调查员信息"+(i+1)+"</div>"
                    +"<div class=\"panel-body\">"
                    +"<div class=\"table-responsive\">"
                    +"<table class=\"table table-striped table-bordered table-hover\">"
                    +"<tbody>"
                        +"<tr>"
                            +"<th class='roleBaseInfoCol'>姓名</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].roleName+"</th>"
                        +"</tr>"
                        +"<tr>"
                            +"<th class='roleBaseInfoCol'>玩家</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].userName+"</th>"
                            +"<th class='roleBaseInfoCol'>年代</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].era+"</th>"
                        +"</tr>"
                        +"<tr>"
                            +"<th class='roleBaseInfoCol'>职业</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].roleJobName+"</th>"
                            +"<th class='roleBaseInfoCol'>职业序号</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].roleJobId+"</th>"
                        +"</tr>"
                        +"<tr>"
                            +"<th class='roleBaseInfoCol'>年龄</th>"
                            +"<th class='roleBaseInfoContent'>"+data[i].roleAge+"</th>"
                            +"<th class='roleBaseInfoCol'>性别</th>"
                            +"<th class='roleBaseInfoContent'>"+gender+"</th>"
                        +"</tr>"
                    +"</tbody>"
                    +"</table>"
                    +"</div>"
                        +"<div class='RBIeditorPanel'>"
                        +"<a class='RBIeditorButton fullInfoButton' name='roleInfo_"+data[i].roleCardId+"'>查看全部信息/编辑</a>"
                        +"<a class='RBIeditorButton deleteButton'>删除该角色卡</a>"
                        +"</div>"
                    +"</div>"
                    +"</div>";
                }
                html+="</div></div>"
                $("#role-cards-root").html(html);

                $(".fullInfoButton").click(function (e) {
                    //console.log(e.currentTarget.name);
                    let roleId = e.currentTarget.name.substring(9);
                    //console.log(roleId);
                    sessionStorage.setItem("roleId", roleId);
                    window.location.replace("/table/roleInfo");
                })
            }
            else{
                window.alert("寄，数据拉取失败。刷新重试也可能没用。");
            }
        })
    }



</script>
</html>
